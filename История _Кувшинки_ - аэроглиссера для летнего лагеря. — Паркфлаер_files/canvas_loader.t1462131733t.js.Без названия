(function(z){var q=function(a,b){typeof b=="undefined"&&(b={});this.init(a,b)},d=q.prototype,o,p=["canvas","vml"],j=["oval","spiral","square","rect","roundRect"],A=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,w=navigator.appVersion.indexOf("MSIE")!==-1&&parseFloat(navigator.appVersion.split("MSIE")[1])===8?true:false,B=!!document.createElement("canvas").getContext,x=true,n=function(a,b,e){a=document.createElement(a);for(var c in e)a[c]=e[c];typeof b!=="undefined"&&b.appendChild(a);return a},m=function(a,
b){for(var e in b)a.style[e]=b[e];return a},u=function(a,b){for(var e in b)a.setAttribute(e,b[e]);return a},v=function(a,b,e,c){a.save();a.translate(b,e);a.rotate(c);a.translate(-b,-e);a.beginPath()};d.init=function(a,b){if(typeof b.safeVML==="boolean")x=b.safeVML;try{this.mum=document.getElementById(a)!==void 0?document.getElementById(a):document.body}catch(e){this.mum=document.body}b.id=typeof b.id!=="undefined"?b.id:"canvasLoader";this.cont=n("div",this.mum,{id:b.id});if(B){o=p[0];this.can=n("canvas",
this.cont);this.con=this.can.getContext("2d");this.cCan=m(n("canvas",this.cont),{display:"none"});this.cCon=this.cCan.getContext("2d")}else{o=p[1];if(typeof q.vmlSheet==="undefined"){document.getElementsByTagName("head")[0].appendChild(n("style"));q.vmlSheet=document.styleSheets[document.styleSheets.length-1];var c=["group","oval","roundrect","fill"],f;for(f in c)q.vmlSheet.addRule(c[f],"behavior:url(#default#VML); position:absolute;")}this.vml=n("group",this.cont)}this.setColor(this.color);this.draw();
m(this.cont,{display:"none"})};d.cont={};d.can={};d.con={};d.cCan={};d.cCon={};d.timer={};d.activeId=0;d.diameter=40;d.setDiameter=function(a){this.diameter=Math.round(Math.abs(a));this.redraw()};d.getDiameter=function(){return this.diameter};d.cRGB={};d.color="#000000";d.setColor=function(a){this.color=A.test(a)?a:"#000000";this.cRGB=this.getRGB(this.color);this.redraw()};d.getColor=function(){return this.color};d.shape=j[0];d.setShape=function(a){for(var b in j)if(a===j[b]){this.shape=a;this.redraw();
break}};d.getShape=function(){return this.shape};d.density=40;d.setDensity=function(a){this.density=x&&o===p[1]?Math.round(Math.abs(a))<=40?Math.round(Math.abs(a)):40:Math.round(Math.abs(a));if(this.density>360)this.density=360;this.activeId=0;this.redraw()};d.getDensity=function(){return this.density};d.range=1.3;d.setRange=function(a){this.range=Math.abs(a);this.redraw()};d.getRange=function(){return this.range};d.speed=2;d.setSpeed=function(a){this.speed=Math.round(Math.abs(a))};d.getSpeed=function(){return this.speed};
d.fps=24;d.setFPS=function(a){this.fps=Math.round(Math.abs(a));this.reset()};d.getFPS=function(){return this.fps};d.getRGB=function(a){a=a.charAt(0)==="#"?a.substring(1,7):a;return{r:parseInt(a.substring(0,2),16),g:parseInt(a.substring(2,4),16),b:parseInt(a.substring(4,6),16)}};d.draw=function(){var a=0,b,e,c,f,h,s,k,r=this.density,t=Math.round(r*this.range),l,i,y=0;i=this.cCon;var g=this.diameter;if(o===p[0]){i.clearRect(0,0,1E3,1E3);u(this.can,{width:g,height:g});for(u(this.cCan,{width:g,height:g});a<
r;){l=a<=t?1-1/t*a:l=0;s=270-360/r*a;k=s/180*Math.PI;i.fillStyle="rgba("+this.cRGB.r+","+this.cRGB.g+","+this.cRGB.b+","+l.toString()+")";switch(this.shape){case j[0]:case j[1]:b=g*0.07;f=g*0.47+Math.cos(k)*(g*0.47-b)-g*0.47;h=g*0.47+Math.sin(k)*(g*0.47-b)-g*0.47;i.beginPath();this.shape===j[1]?i.arc(g*0.5+f,g*0.5+h,b*l,0,Math.PI*2,false):i.arc(g*0.5+f,g*0.5+h,b,0,Math.PI*2,false);break;case j[2]:b=g*0.12;f=Math.cos(k)*(g*0.47-b)+g*0.5;h=Math.sin(k)*(g*0.47-b)+g*0.5;v(i,f,h,k);i.fillRect(f,h-b*0.5,
b,b);break;case j[3]:case j[4]:e=g*0.3;c=e*0.27;f=Math.cos(k)*(c+(g-c)*0.13)+g*0.5;h=Math.sin(k)*(c+(g-c)*0.13)+g*0.5;v(i,f,h,k);this.shape===j[3]?i.fillRect(f,h-c*0.5,e,c):(b=c*0.55,i.moveTo(f+b,h-c*0.5),i.lineTo(f+e-b,h-c*0.5),i.quadraticCurveTo(f+e,h-c*0.5,f+e,h-c*0.5+b),i.lineTo(f+e,h-c*0.5+c-b),i.quadraticCurveTo(f+e,h-c*0.5+c,f+e-b,h-c*0.5+c),i.lineTo(f+b,h-c*0.5+c),i.quadraticCurveTo(f,h-c*0.5+c,f,h-c*0.5+c-b),i.lineTo(f,h-c*0.5+b),i.quadraticCurveTo(f,h-c*0.5,f+b,h-c*0.5))}i.closePath();i.fill();
i.restore();++a}}else{m(this.cont,{width:g,height:g});m(this.vml,{width:g,height:g});switch(this.shape){case j[0]:case j[1]:k="oval";b=140;break;case j[2]:k="roundrect";b=120;break;case j[3]:case j[4]:k="roundrect";b=300}e=c=b;f=500-c;for(h=-c*0.5;a<r;){l=a<=t?1-1/t*a:l=0;s=270-360/r*a;switch(this.shape){case j[1]:e=c=b*l;f=500-b*0.5-b*l*0.5;h=(b-b*l)*0.5;break;case j[0]:case j[2]:w&&(h=0,this.shape===j[2]&&(f=500-c*0.5));break;case j[3]:case j[4]:e=b*0.95;c=e*0.28;w?(f=0,h=500-c*0.5):(f=500-e,h=
-c*0.5);y=this.shape===j[4]?0.6:0}i=u(m(n("group",this.vml),{width:1E3,height:1E3,rotation:s}),{coordsize:"1000,1000",coordorigin:"-500,-500"});i=m(n(k,i,{stroked:false,arcSize:y}),{width:e,height:c,top:h,left:f});n("fill",i,{color:this.color,opacity:l});++a}}this.tick(true)};d.clean=function(){if(o===p[0])this.con.clearRect(0,0,1E3,1E3);else{var a=this.vml;if(a.hasChildNodes())for(;a.childNodes.length>=1;)a.removeChild(a.firstChild)}};d.redraw=function(){this.clean();this.draw()};d.reset=function(){typeof this.timer===
"number"&&(this.hide(),this.show())};d.tick=function(a){var b=this.con,e=this.diameter;a||(this.activeId+=360/this.density*this.speed);o===p[0]?(b.clearRect(0,0,e,e),v(b,e*0.5,e*0.5,this.activeId/180*Math.PI),b.drawImage(this.cCan,0,0,e,e),b.restore()):(this.activeId>=360&&(this.activeId-=360),m(this.vml,{rotation:this.activeId}))};d.show=function(){if(typeof this.timer!=="number"){var a=this;this.timer=self.setInterval(function(){a.tick()},Math.round(1E3/this.fps));m(this.cont,{display:"block"})}};
d.hide=function(){typeof this.timer==="number"&&(clearInterval(this.timer),delete this.timer,m(this.cont,{display:"none"}))};d.kill=function(){var a=this.cont;typeof this.timer==="number"&&this.hide();o===p[0]?(a.removeChild(this.can),a.removeChild(this.cCan)):a.removeChild(this.vml);for(var b in this)delete this[b]};z.CanvasLoader=q})(window);
