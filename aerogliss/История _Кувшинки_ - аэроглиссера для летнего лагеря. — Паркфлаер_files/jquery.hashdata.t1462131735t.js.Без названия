$.hashdata=new function(){var e={category:{page:true,type:true},query:{page:true,type:true},lipo:{page:true,brand:true,config:true,capacity:true,discharge:true},glagne:{page:true}};this.get=function(a){this._parseHash(false,true);return this.data[a]};this.set=function(a,b,c){this._parseHash(false,true);this._handleApps(a);this.data[a]=b;this._setHash(this._serialize(),c)};this.setMulti=function(a,b){this._parseHash(false,true);this._handleApps(a);$.extend(this.data,a);this._setHash(this._serialize(),
b)};this.remove=function(a){this._parseHash(false,true);delete this.data[a];this._setHash(this._serialize())};this.setPosition=function(a,b){this._parseHash(false,true);this.data.position=a;this._setHash(this._serialize(),b);this._scrollTo(a)};this._setHash=function(a,b){this.currentHash="#"+a;if(b)if($.browser.msie)location="#"+a;else location.hash="#"+a;else if(history.replaceState)try{history.replaceState({},document.title,"#"+a)}catch(c){}else location.replace("#"+a)};this._serialize=function(a){if(!a)a=
this.data;var b="";Object.keys(a).forEach(function(c){b+=c+"=";b+=encodeURIComponent(a[c].toString())+"&"});return b.slice(0,-1)};this._scrollTo=function(a){var b=$("a[name="+a+"]");b.length||(b=$("#"+a));try{$.browser.webkit?window.scrollBy(0,b.offset().top-$(window).scrollTop()):window.scrollTo(0,b.offset().top)}catch(c){}};this._parseHash=function(a,b){this.data={};var c=location.hash.substr(1)?location.hash.substr(1).split("&"):[],d=this;if(c[0]&&c[0].indexOf("=")==-1)c[0]="position="+c[0];c.forEach(function(f){f=
f.split("=");d.data[f[0]]=decodeURIComponent(f[1])});this.currentHash=location.hash;if(this.data.position&&!b)if(a)$(window).one("load",function(){d._scrollTo(d.data.position)});else this._scrollTo(this.data.position)};this._hashchanged=function(){if(decodeURIComponent(this.currentHash)!=decodeURIComponent(location.hash)){this.currentHash=location.hash;$(window).trigger("realhashchange")}};var g=this;if(window.onhashchange)$("window").on("hashchange",function(){g._hashchanged()});else setInterval(function(){g._hashchanged()},
500);this._handleApps=function(a){var b=this;("string"===typeof a?[a]:Object.keys(a)).forEach(function(c){e.hasOwnProperty(c)&&Object.keys(b.data).forEach(function(d){if(d!==c&&e.hasOwnProperty(d)){delete b.data[d];Object.keys(e[d]).forEach(function(f){delete b.data[f]})}})})}};$.hashdata._parseHash(true);$(function(){$(document).on("click","a[href^=#]",function(){var e=$(this).attr("href");if(e&&e.length>1){$.hashdata.setPosition($(this).attr("href").substr(1),true);return false}})});
