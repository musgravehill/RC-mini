var do_not_hide=false,disable=false,debug_tooltip=false;
(function(a){function w(){a.log_tooltip("bindEvents - mouseover");a.bindEvent(document,"mouseover",function(b){o=setTimeout(function(){var c=p(b);if(c){a.log_tooltip("linkMouseOver",c);var d={};a.log_tooltip("\tlinkMouseOver \u043f\u0430\u0440\u0441\u0438\u043c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b");x(c,d);if(!(!d.key||l==c)){l=c;m=d;a.log_tooltip("\tlinkMouseOver: \u041d\u0430\u0432\u0435\u043b\u0438 \u043d\u0430 \u0432\u0430\u043b\u0438\u0434\u043d\u0443\u044e \u0441\u0441\u044b\u043b\u043a\u0443\n\t\u0418\u0434\u0435\u043c \u0438\u0441\u043a\u0430\u0442\u044c \u0434\u0430\u0442\u0443");a.log_tooltip("getTooltip\n\tgetTooltip: \u043f\u044b\u0442\u0430\u0435\u043c\u0441\u044f \u043d\u0430\u0439\u0442\u0438 \u0432 \u043a\u0435\u0448\u0435",
d);a.log_tooltip("\tloadData\n\t\tloadData \u043f\u044b\u0442\u0430\u0435\u043c\u0441\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0437 \u043a\u0435\u0448\u0430",d);c=n(d);c=q[c];if(c==null){a.log_tooltip("\tgetTooltip: \u043d\u0435 \u043d\u0430\u0448\u043b\u0438 \u0432 \u043a\u0435\u0448\u0435 -  \u0438\u0434\u0435\u043c \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c ");a.log_tooltip("showLoading");if(l!=null){wait_tooltip='<img style="position: relative;left: 40%;margin-top: 34px;" src="/static/images/menu_wait.gif"/>';
Tooltip.show(l,'<div class="scr_tooltip_loading">'+wait_tooltip+"</div>",true)}a.log_tooltip("requestTooltip",d);a.log_tooltip("\trequestTooltip: \u0430\u044f\u043a\u0441 \u0437\u0430\u043f\u0440\u043e\u0441");y(d);d=null}else{a.log_tooltip("\tgetTooltip: \u043d\u0430\u0448\u043b\u0438 \u0432 \u043a\u0435\u0448\u0435 ");d=c}if(d!=null){a.log_tooltip("\tlinkMouseOver: \u041f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0435  - \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c \u0442\u0443\u043b\u0442\u0438\u043f");
r(d)}}}},z)});a.log_tooltip("bindEvents - mouseout");a.bindEvent(document,"mouseout",function(b){clearTimeout(o);if(b=p(b)){a.log_tooltip("linkMouseOut",b);if(b==l){Tooltip.hide(b);m=l=null}}})}function p(b){b=a.normalizeEvent(b);b=b.target;for(var c=0;b&&++c<=5;){if(b.nodeName.toUpperCase()=="A")return b;b=b.parentNode}return null}function r(b){a.log_tooltip("\t\tshowTooltip: \u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c \u0442\u0443\u043b\u0442\u0438\u043f");l!=null&&Tooltip.show(l,
b)}function x(b,c){a.log_tooltip("parseUrl",b,c);var d=a(b).find("span.block_preview_product_src[data-super-link]").text();d&&a(b).attr("href",d);a(b).find(".block_preview_blog_src[data-super-link]").each(function(){var h=a(this).attr("data-super-link");a(this).click(function(){a(b).attr("href",h)})});if(!a(b).parents(".scr_tooltip_out").length)if(b.href.match(A[B])){d=a(b).attr("class");if(d=="super-link-wrap"||d=="super-link-wrap best_entries")d="";if(d)if(d!="")if(d.indexOf("block_preview_product_src")==
-1||d.indexOf("block_preview_blog_src")==-1)return;if(d=a(b).attr("href"))if(d.match(/#/i))return;var e=a(b).parents(),k=a(b).parents();for(d=0;d<=e.length;d++){var g=a(e[d]).attr("id");if(C.indexOf(g)!=-1)return}for(d=0;d<=k.length;d++){e=a(k[d]).attr("class");if(D.indexOf(e)!=-1)return}if(!a(b).closest("#cart_wrapper")[0]){k=RegExp.$1;for(d=0;d<s.length;++d){e=s[d];a.log_tooltip("\tparseUrl: \u043f\u0430\u0440\u0441\u0438\u043c \u0440\u0435\u0441\u0442 ",k);if(k.match(e.regex)){g=RegExp.$1;a.log_tooltip("\tparseUrl: \u043d\u0430\u0448\u043b\u0438 key - ",
g);if(g.indexOf("/")==-1){c.key=g;for(var f in e.params)c[f]=e.params[f];c.tooltipType=E(c.type);break}}else a.log_tooltip("\tparseUrl: \u043d\u0435\u0442 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439")}}}}function E(b){a.log_tooltip("getTooltipType",b,"\n\t",t[b]);return t[b]}function n(b){a.log_tooltip("\t\tgetCacheKeyFromParams",b);b=[b.type,b.key].join("-");a.log_tooltip("\t\ttgetCacheKeyFromParams \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u043a\u0435\u0448 \u043a\u0435\u0439  ",
b);return b}function y(b){a.ajax({type:"POST",data:{showType:"show_tooltip"},url:b.tooltipType.url.replace("{key}",b.key).replace("{lang}",language),success:function(c){a.log_tooltip("ajax_tooltip: \u042d\u0442\u043e \u0423\u0441\u043f\u0435\u0445! \u0442\u044b \u043a\u0440\u0430\u0441\u0430\u0432\u0447\u0438\u043a! \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043b \u0434\u0430\u0442\u0443.");a.log_tooltip("saveData: \u0420\u0430\u0437 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043b\u0438, \u0437\u043d\u0430\u0447 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u043c \u0432 \u043a\u0435\u0448\u0435");
var d=n(b);q[d]=c;m!=null&&n(b)==n(m)?r(c):Tooltip.closeLoad()},error:function(c){a.log_tooltip("ajax_tooltip",c)}})}var B=window.location.hostname,C="instock_variations cart_wrapper product_variations product_list tbl_justin tbl_category",D="prod_review post-header-info-title odd open first_td_tbl_category search_res support-info",A=!disable?{"www.parkflyer.local":/^https?:\/\/(?:www.)?parkflyer.local\/(.+)/,localhost:/^https?:\/\/(?:www.)?parkflyer.ru\/(.+)/,"www.parkflyer.ru":/^https?:\/\/(?:www.)?parkflyer.ru\/(.+)/,
"www.motopes.ru":/^https?:\/\/(?:www.)?motopes.ru\/(.+)/,"www.smogudolgo.ru":/^https?:\/\/(?:www.)?smogudolgo.ru\/(.+)/,"www.hydromate.ru":/^https?:\/\/(?:www.)?hydromate.ru\/(.+)/,"www.parts4garmin.ru":/^https?:\/\/(?:www.)?parts4garmin.ru\/(.+)/,"www.stroik.ru":/^https?:\/\/(?:www.)?stroik.ru\/(.+)/,"www.rcfair.com":/^https?:\/\/(?:www.)?rcfair.com\/(.+)/}:{},s=[{regex:/product\/([0-9]+)/,params:{type:"product"}},{regex:/blogs\/view_entry\/([0-9]+)/,params:{type:"blog"}}],t={product:{type:"product",
url:"/product_mini/{key}/"},blog:{type:"blog",url:"/get_blog_tooltip?key={key}&lang={lang}"}},q={},u=500,z=500,l,m,v,o;a.scr_tooltip_plugin=function(){function b(f){a.log_tooltip("\t\u0417\u0430\u0431\u0438\u043d\u0434\u0438\u043c \u044d\u0432\u0435\u043d\u0442\u044b \u0441\u043a\u0440\u044b\u0442\u0438\u044f \u0442\u0443\u043b\u0442\u0438\u043f\u0430");do_not_hide||a(f).unbind("mouseleave").unbind("mouseenter").bind("mouseenter",function(){clearTimeout(v)}).bind("mouseleave",function(h){h.preventDefault();
v=setTimeout(function(){e.style.display="none";g.style.display="none"},u)})}function c(f){a.log_tooltip("hide: \u0421\u043a\u0440\u043e\u0435\u043c \u0442\u0443\u043b\u0442\u0438\u043f");e==null||g==null||f&&b(f)}function d(f,h,i){a.log_tooltip("\tReveal: \u0421\u0442\u0430\u0432\u0438\u043c \u0442\u0443\u043b\u0442\u0438\u043f \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0441 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u0430\u043c\u0438",f,h);i.style.left=
f+"px";i.style.top=h+"px";i.style.visibility="visible"}a.log_tooltip("\u0421\u0442\u0430\u0440\u0442\u0443\u0435\u043c \u043f\u043b\u0430\u0433\u0438\u043d");var e,k,g;this.closeLoad=function(){setTimeout(function(){g.style.display="none"},u)};this.show=function(f,h,i){i=i||false;var j;a.log_tooltip("show: \u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c \u0442\u0443\u043b\u0442\u0438\u043f",f,h);f=a(f).children().find(".block_preview_product_src")[0]||f;if(f===null)a.log_tooltip("\t\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0441\u0441\u044b\u043b\u043a\u0430, \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u043d\u0443\u0436\u0435\u043d \u0442\u0443\u043b\u0442\u0438\u043f");
else{if(e==null||g==null){a.log_tooltip("\t\u0422\u0443\u043b\u0442\u0438\u043f \u0435\u0449\u0435 \u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d -> \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f");a.log_tooltip("initialize: \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f");e=a.create("div","scr_tooltip_out");e.tabIndex=-1;e.className="scr_tooltip_out";k=a.create("div","scr_tooltip_in");k.className="scr_tooltip_in";
g=a.create("div","scr_tooltip_load");g.className="scr_tooltip_load";e.appendChild(k);document.body.appendChild(e);document.body.appendChild(g);c()}if(h.trim()=="undefined_blog"||h.trim()=="null"){a.log_tooltip("\t\u0412 \u0440\u0435\u0434\u0438\u0441\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0430\u043a\u043e\u0439 \u0431\u043b\u043e\u0433");e.style.display="none";g.style.display="none"}else if(h.trim()=="undefined_product"){a.log_tooltip("\t\u0412 \u0431\u0430\u0437\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0430\u043a\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0442");
e.style.display="none";g.style.display="none";a("#message_box").fmessage("open",gettext("\u0417\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u043d\u044b\u0439 \u0442\u043e\u0432\u0430\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d."));setTimeout(function(){a("#message_box").fmessage("close")},4E3)}else{if(i){e.style.display="none";j=g}else{g.style.display="none";j=e}a(j).removeClass("scr_tooltip_out_top");j.style.visibility="hidden";j.style.display="block";j.innerHTML=h;a.log_tooltip("\t\u0412\u044b\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u043c \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b");
a.getViewPort();h=a.getOffset(f);var F=a(window).width();f=h.x+f.offsetWidth+5+8;i=h.y+j.offsetHeight-5-(!i?225:189);if(F-(f+j.offsetWidth)<0){a.log_tooltip("\t\u0422\u0443\u043b\u0442\u0438\u043f \u043d\u0435 \u043f\u043e\u043f\u0430\u043b \u0432 \u0433\u0440\u0430\u043d\u0438\u0446\u044b \u044d\u043a\u0440\u0430\u043d\u0430 -> \u043f\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u0430\u0435\u043c \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b");f=h.x;i=h.y+j.offsetHeight-5-296;a(j).addClass("scr_tooltip_out_top")}a.log_tooltip("\t\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b - ",
f,i);d(f,i,j);a(j).get(0).focus();b(e);b(g)}}};this.hide=c};a.create=function(b,c){a.log_tooltip("\t$Create: \u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0431\u043b\u043e\u043a\u0438",b,c);return document.createElement(b)};a.getViewPort=function(){var b=a.getWindowSize(),c=a.getScrollPosition();return{l:c.x,t:c.y,r:c.x+b.w,b:c.y+b.h}};a.getWindowSize=function(){var b=0,c=0;if(document.documentElement&&document.documentElement.clientHeight){b=document.documentElement.clientWidth;c=document.documentElement.clientHeight}else if(document.body&&
document.body.clientHeight){b=document.body.clientWidth;c=document.body.clientHeight}else if(window.innerHeight){b=window.innerWidth;c=window.innerHeight}return{w:b,h:c}};a.getScrollPosition=function(){var b=0,c=0;if(window.pageXOffset||window.pageYOffset){b=window.pageXOffset;c=window.pageYOffset}else if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){b=document.body.scrollLeft;c=document.body.scrollTop}else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){b=
document.documentElement.scrollLeft;c=document.documentElement.scrollTop}a.log_tooltip("\t",{x:b,y:c});return{x:b,y:c}};a.getOffset=function(b){for(var c=0,d=0;b;){c+=b.offsetLeft;d+=b.offsetTop;for(var e=b.parentNode;e&&e!=b.offsetParent&&e.offsetParent;){if(e.scrollLeft||e.scrollTop){c-=e.scrollLeft|0;d-=e.scrollTop|0;break}e=e.parentNode}b=b.offsetParent}a.log_tooltip("\t",{x:c,y:d});return{x:c,y:d}};a.log_tooltip=function(){typeof debug_tooltip!="undefined"&&debug_tooltip===true&&typeof console!=
"undefined"&&console.log.apply(console,arguments)};a.documentReady=function(b){a.log_tooltip("$documentReady");if(document.readyState=="complete")b();else{var c=false;a.log_tooltip("\t \u0411\u0438\u043d\u0434\u0438\u043c DOMContentLoaded \u0438 readystatechange");a.bindEvent(document,"DOMContentLoaded",function(){if(!c){c=true;b()}});a.bindEvent(document,"readystatechange",function(){if(document.readyState=="complete"&&!c){c=true;b()}})}};a.normalizeEvent=function(b){var c={};c.target=b.target?b.target:
b.srcElement;c.which=b.which?b.which:b.button;return c};a.bindEvent=function(b,c,d){b.addEventListener?b.addEventListener(c,d,true):b.attachEvent("on"+c,d)};Tooltip=new a.scr_tooltip_plugin;a.log_tooltip("construct");a.documentReady(function(){a.log_tooltip("initialize");setTimeout(w,1)})})(jQuery);
